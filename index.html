<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Parking Animation - Looped</title>
<style>
  /* Your existing CSS goes here - no changes needed */
  body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #e0e0e0;
    overflow: hidden;
  }

  .lot {
    width: 400px;
    height: 250px;
    background: #ccc;
    border: 8px solid navy;
    position: relative;
    box-sizing: border-box;
    overflow: hidden;
  }

  .road-surface {
    position: absolute;
    background-color: #aaa;
    z-index: 1;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
  }

  .center-line {
    position: absolute;
    width: 2px;
    height: 100%;
    left: 191px;
    background-image: linear-gradient(white 75%, transparent 25%);
    background-size: 2px 20px;
    z-index: 2;
  }

  .spot-container {
    position: absolute;
    width: 50px;
    height: 90px;
    border: 2px solid white;
    box-sizing: border-box;
    z-index: 3;
  }

  .car-body {
    width: 48px;
    height: 88px;
    position: absolute;
    top: 1px;
    left: 1px;
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    border-radius: 8px;
  }

  .grey-car .car-body {
    background-image: url('./gcar.png'); 
  }

  #blue-car .car-body {
    background-image: url('./car.png');
  }

  #spot1 { top: 10px; left: 10px; }
  #spot2 { top: 10px; left: 65px; }
  #spot3 { top: 10px; left: 120px; }
  #spot4 { top: 10px; left: 215px; }
  #spot5 { top: 10px; left: 270px; }
  #empty-spot {
    top: 10px;
    left: 325px;
    border: 2px dashed navy;
  }
  #spot7 { top: 142px; left: 10px; }
  #spot8 { top: 142px; left: 65px; }
  #spot9 { top: 142px; left: 120px; }
  #spot10 { top: 142px; left: 215px; }
  #spot11 { top: 142px; left: 270px; }
  #spot12 { top: 142px; left: 325px; }

  #blue-car {
    position: absolute;
    width: 50px;
    height: 90px;
    bottom: -100px;
    left: 170px;
    z-index: 10;
    transition: all 1.5s ease-in-out;
  }
</style>
</head>
<body>

<div class="lot" id="lot">
  <div class="road-surface"></div>
  <div class="center-line"></div>
  <div class="spot-container" id="spot1"><div class="grey-car"><div class="car-body"></div></div></div>
  <div class="spot-container" id="spot2"><div class="grey-car"><div class="car-body"></div></div></div>
  <div class="spot-container" id="spot3"><div class="grey-car"><div class="car-body"></div></div></div>
  <div class="spot-container" id="spot4"><div class="grey-car"><div class="car-body"></div></div></div>
  <div class="spot-container" id="spot5"><div class="grey-car"><div class="car-body"></div></div></div>
  <div class="spot-container" id="empty-spot"></div>
  <div class="spot-container" id="spot7"><div class="grey-car"><div class="car-body"></div></div></div>
  <div class="spot-container" id="spot8"><div class="grey-car"><div class="car-body"></div></div></div>
  <div class="spot-container" id="spot9"><div class="grey-car"><div class="car-body"></div></div></div>
  <div class="spot-container" id="spot10"><div class="grey-car"><div class="car-body"></div></div></div>
  <div class="spot-container" id="spot11"><div class="grey-car"><div class="car-body"></div></div></div>
  <div class="spot-container" id="spot12"><div class="grey-car"><div class="car-body"></div></div></div>
  <div id="blue-car">
    <div class="car-body"></div>
  </div>
</div>

<script>
window.onload = () => {
  // 1. Get a reference to the car element
  const car = document.getElementById("blue-car");

  // 2. Define the animation sequence inside a function
  function startParkingAnimation() {
    // Step 1: Car enters and drives up
    setTimeout(() => {
      car.style.bottom = '75px';
    }, 500);

    // Step 2: Car turns right
    setTimeout(() => {
      car.style.transform = 'rotate(90deg)';
    }, 2500);

    // Step 3: Car drives forward
    setTimeout(() => {
      car.style.left = '280px';
    }, 4000);
    
    // Step 4: Car turns and pulls into the spot
    setTimeout(() => {
      car.style.transform = 'rotate(0deg)';
      car.style.left = '325px';
      car.style.bottom = '150px'; 
    }, 6000);

    // Step 5: Reset the car's position after the animation finishes
    setTimeout(() => {
      // Temporarily disable transitions for an instant reset
      car.style.transition = 'none'; 
      
      // Reset position and rotation to the start
      car.style.bottom = '-100px';
      car.style.left = '170px';
      car.style.transform = 'rotate(0deg)';

      // Use a tiny delay to re-enable transitions AFTER the reset
      // This forces the browser to apply the above styles instantly
      setTimeout(() => {
        car.style.transition = 'all 1.5s ease-in-out';
      }, 50);

    }, 8500); // Wait until the parking animation is done

    // Step 6: Call the function again to start the loop
    // The delay should be longer than the reset timer
    setTimeout(startParkingAnimation, 9000);
  }

  // 3. Start the first animation cycle
  startParkingAnimation();
};
</script>

</body>
</html>